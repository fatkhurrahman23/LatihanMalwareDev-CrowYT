#include <windows.h>
#include <stdio.h>

int main(){
    /*
    BOOL WINAPI CreateProcessW(
    _In_opt_     LPCWSTR               lpApplicationName,
    _Inout_opt_  LPWSTR                lpCommandLine,
    _In_opt_     LPSECURITY_ATTRIBUTES lpProcessAttributes,
    _In_opt_     LPSECURITY_ATTRIBUTES lpThreadAttributes,
    _In_         BOOL                  bInheritHandles,
    _In_         DWORD                 dwCreationFlags,
    _In_opt_     LPVOID                lpEnvironment,
    _In_opt_     LPCWSTR               lpCurrentDirectory,
    _In_         LPSTARTUPINFOW        lpStartupInfo,
    _Out_        LPPROCESS_INFORMATION lpProcessInformation
    );
    */

//    OpenProcess()
STARTUPINFO si = {0};
PROCESS_INFORMATION pi = {0};

    if (!CreateProcessW(
        L"C:\\Windows\\System32\\notepad.exe",
        NULL, 
        NULL,
        NULL,
        FALSE,
        NORMAL_PRIORITY_CLASS,
        NULL,
        NULL,
        &si,
        &pi))
    {
        printf("(-) failed to create process, error: %ld", GetLastError());
        return EXIT_FAILURE;
    }

    printf("(-) process started! Process ID: %ld \n", pi.dwProcessId);
    printf("(-) process started! Thread ID: %ld \n", pi.dwThreadId);
    return 0;
}